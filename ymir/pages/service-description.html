<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ymir</title>
    <meta name="description" content="">
    <meta name="author" content="mvr">

    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
        <script src="../theme/html5.js"></script>
        <![endif]-->

    <!-- Styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">

    <!-- Feeds -->




  </head>
  <body>
    <div class="topbar">
      <div class="topbar-inner">
        <div class="container-fluid">
          <a class="brand" href="../">ymir</a>
          <ul class="nav">
            <li><a href="../">About</a></li>
            <li><a href="../pages/installation.html">Installation</a></li>
            <li><a href="../pages/usage.html">Quick Start</a></li>
            <li><a href="../pages/service-description.html">Service Descriptions</a></li>
            <li><a href="../pages/service-operations.html">Service Operations</a></li>
            <li><a href="../pages/service-implementations.html">Service Implementations</a></li>
            <li><a href="../pages/other-automation.html">Other automation</a></li>
          </ul>
          <p class="pull-right">
            <a href="https://github.com/mattvonrocketstein/ymir/">[github]</a>
            <a href="https://github.com/mattvonrocketstein/ymir/issues">[issues]</a>
          </p>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="sidebar">
        <div class="well">
          <h3>TOC</h3>
          <ul>
            <li><a href="../">About</a></li>
            <li><a href="../pages/installation.html">Installation</a></li>
            <li><a href="../pages/usage.html">Quick Start</a></li>
            <li><a href="../pages/service-description.html">Service Descriptions</a></li>
            <li><a href="../pages/service-operations.html">Service Operations</a></li>
            <li><a href="../pages/service-implementations.html">Service Implementations</a></li>
            <li><a href="../pages/other-automation.html">Other automation</a></li>
          </ul>
        </div>
        <div class="well">
          <h3>Other Links</h3>
          <ul>
            <li><a href="https://github.com/mattvonrocketstein/ymir/">Source code</a></li>
            <li><a href="https://github.com/mattvonrocketstein/ymir/issues">Issues</a></li>
          </ul>
        </div>
      </div>
      <div class="content">
        <div class='page'>
                <div class="page-header"><h1>Service Descriptions</h1></div>
                <div><p>Service descriptions are structured service metadata which by default are stored in <code>service.json</code> files.  If you want to use a file of a different name, you can set the environment variable <code>YMIR_SERVICE_JSON=...</code> before running <a href="../service-operations.html">service operations</a> commands.</p>
<p>Service description files are parsed using a superset of json, and comments (prefaced with "//") are allowed.  As a complete example, you can always view the most recent service-description schema/boilerplate <a href="https://github.com/mattvonrocketstein/ymir/blob/master/ymir/skeleton/service.json">here</a> (this is exactly what is generated by <code>ymir init</code>).</p>
<h1><a name="field-summaries">Metadata field summaries</a></h1>
<p>Click any individual field name to jump to a more detailed description of the field.</p>
<table>
<thead>
<tr>
<th>Field name</th>
<th>Schema</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>org_name</td>
<td>string</td>
<td>The name of the organization responsible for this service</td>
</tr>
<tr>
<td>app_name</td>
<td>string</td>
<td>The name of the application this service is a part of</td>
</tr>
<tr>
<td>env_name</td>
<td>string</td>
<td>The environment name for this service (suggested value: one of dev/test/prod)</td>
</tr>
<tr>
<td>service_name</td>
<td>string</td>
<td>The name of this service.  This is essentially the name of the EC2 instance, and so must be unique inside a given AWS account.  This value is always used to discover the service IP dynamically.</td>
</tr>
<tr>
<td>service_description</td>
<td>string</td>
<td>A human-friendly description of this service.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td org_name="org_name">name of this instance (suggested value: </td>
</tr>
<tr>
<td>ymir_debug</td>
<td>bool</td>
<td>Specifies whether ymir is in debug mode.  Currently this adds some additional output, but does nothing else.</td>
</tr>
<tr>
<td>s3_buckets</td>
<td>list_of_strings</td>
<td>A list of named s3 buckets associated with this service.  During <code>fab setup</code>, buckets that do not exist will be created.  During <code>fab s3</code>, the contents of buckets mentioned in this list will be summarized.</td>
</tr>
<tr>
<td>tags</td>
<td>list_of_strings</td>
<td>AWS tags which are associated with service instance.  Key-value maps are not supported, and suggested values are things like "python", or "node".  Entries here will get tagged as "true" since the main use-case is filtering instances later.</td>
</tr>
<tr>
<td>logs</td>
<td>list_of_strings</td>
<td>A list of absolute paths to important logfiles on this service.</td>
</tr>
<tr>
<td>elastic_ips</td>
<td>list_of_strings</td>
<td>A list of elastic IP addresses associated with this service.  (NB: These are actual addresses, not AWS address-IDs)  The elastic IPs must already exist and will not be created, but during <code>fab setup</code>, the IPs will be bound to the instance if they are not already.</td>
</tr>
<tr>
<td>ami</td>
<td>string</td>
<td>The AMI used when this service is initially created.   Only used during <code>fab setup</code></td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>The username used for ssh'ing into service for provisioning, etc.  Typically either <code>ubuntu</code> or <code>ec2-user</code>, depending on the AMI you're using.</td>
</tr>
<tr>
<td>instance_type</td>
<td>string</td>
<td>AWS instance type used when creating this service.  See <a href="http://ec2instances.info">this page</a> for some hints about instance type attributes and associated costs per month.</td>
</tr>
<tr>
<td>pem</td>
<td>string</td>
<td>The path to the keyfile on localhost that is used for sshing into the service.  This entry typically  is the thing you downloaded when creating the AWS key, see also the <code>key_name</code> field.  This field supports tilda-expansion, so for instance a value like <code>~/.ssh/keyfile.pem</code> is acceptable.</td>
</tr>
<tr>
<td>key_name</td>
<td>string</td>
<td>The AWS key used when creating this instance.  The key must already exist.  See <a href="other-automation.html#aws-keypairs">this section</a> for help creating new AWS keys.</td>
</tr>
<tr>
<td>setup_list</td>
<td>list_of_strings</td>
<td>A list of instructions to carry out during service setup phase</td>
</tr>
<tr>
<td>provision_list</td>
<td>list_of_strings</td>
<td>A list of instructions to carry out during service provision phase</td>
</tr>
<tr>
<td>security_groups</td>
<td>list_of_strings</td>
<td>A list of AWS security groups this service will belong to.  These security groups must already exist.  See <a href="other-automation.html#security-groups">this section</a> for help creating and synchronizing new AWS security groups.</td>
</tr>
<tr>
<td>health_checks</td>
<td><code>{name: [check_type, check_argument], .. }</code></td>
<td>A hash of named checks that can be performed against this service.  See <a href="#health-checks">this section</a> for more information about health checks that ymir supports.</td>
</tr>
<tr>
<td>service_defaults</td>
<td><code>{ key: value}</code></td>
<td>Free form, schema-free subsection, which typically is used for holding application configuration data, puppet facts, etc.</td>
</tr>
</tbody>
</table>
<h1><a name="critical-fields">Critical fields</a></h1>
<p>The <a href="#"><em>key_name</em></a> and <a href="#"><em>pem</em></a> fields are critical for authenticating with your service to complete updates, etc.  The <em>key_name</em> field refers to a named AWS key, and the <em>pem</em> field should be a path that points to your corresponding AWS private key file.</p>
<p>The security_groups field defines which AWS security groups this service will belong to. Ymir may eventually contain helpers for building security groups, but at the moment these should probably be constructed by hand in advance.</p>
<p>Both the <em>setup_list</em> and <em>provision_list</em> fields describe a list of instructions (such as puppet files which will be invoked in standalone-mode on the remote host).  Order matters for these fields.  For more information on the difference between setup and provisioning, please see <a href="#">this section</a> of the service operations documentation.</p>
<h1><a name="health-checks">Supported health Checks</a></h1>
<h1><a name="templating">Templating</a></h1>
<p><strong>Service.json</strong> files support some templating.</p></div>
        </div>
        <footer>
          <p>&copy; mvr</p>
        </footer>
      </div>

    </div>
  </body>
</html>